"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[33069],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=i.createContext({}),u=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=u(e.components);return i.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),f=o,h=d["".concat(l,".").concat(f)]||d[f]||p[f]||a;return n?i.createElement(h,r(r({ref:t},c),{},{components:n})):i.createElement(h,r({ref:t},c))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var u=2;u<a;u++)r[u]=n[u];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},68840:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>f,default:()=>b,frontMatter:()=>d,metadata:()=>h,toc:()=>g});var i=n(3905),o=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,p=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&c(e,n,t[n]);if(s)for(var n of s(t))u.call(t,n)&&c(e,n,t[n]);return e};const d={id:"broker-authentication",title:"Authentication",sidebar_label:"Authentication"},f=void 0,h={unversionedId:"administration/configuration/broker-authentication",id:"administration/configuration/broker-authentication",title:"Authentication",description:"It is important to configure authentication on your Eclipse Mosquitto instance, so unauthorized clients cannot connect.",source:"@site/mosquitto/administration/configuration/authentication.md",sourceDirName:"administration/configuration",slug:"/administration/configuration/broker-authentication",permalink:"/documentation-staging/mosquitto/next/administration/configuration/broker-authentication",draft:!1,tags:[],version:"current",frontMatter:{id:"broker-authentication",title:"Authentication",sidebar_label:"Authentication"}},m={},g=[{value:"Password files",id:"password-files",level:2},{value:"Creating a password file",id:"creating-a-password-file",level:3},{value:"Configuring the broker",id:"configuring-the-broker",level:3},{value:"Authentication plugins",id:"authentication-plugins",level:2},{value:"Available plugins",id:"available-plugins",level:3},{value:"Unauthenticated access",id:"unauthenticated-access",level:2}],y={toc:g};function b(e){var t,n=e,{components:o}=n,c=((e,t)=>{var n={};for(var i in e)l.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&s)for(var i of s(e))t.indexOf(i)<0&&u.call(e,i)&&(n[i]=e[i]);return n})(n,["components"]);return(0,i.kt)("wrapper",(t=p(p({},y),c),a(t,r({components:o,mdxType:"MDXLayout"}))),(0,i.kt)("p",null,"It is important to configure authentication on your Eclipse Mosquitto instance, so unauthorized clients cannot connect."),(0,i.kt)("p",null,"In Mosquitto 2.0 and up, you must choose your authentication options explicitly before clients can connect. In earlier versions the default is to allow clients to connect without authentication."),(0,i.kt)("p",null,"There are three choices for authentication: password files, authentication plugins, and unauthorized/anonymous access. It is possible to use a combination of all three choices."),(0,i.kt)("p",null,"It is possible to have different listeners use different authentication methods by setting per_listener_settings true in your configuration file."),(0,i.kt)("p",null,"As well as authentication you should also consider some form of access control to determine what clients can access which topics."),(0,i.kt)("h2",p({},{id:"password-files"}),"Password files"),(0,i.kt)("p",null,"Password files are a simple mechanism of storing usernames and passwords in a single file. They are good if you have a relatively small number of fairly static users."),(0,i.kt)("p",null,"If you make changes to the password file you must trigger the broker to reload the file by sending a SIGHUP message:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"kill -HUP <process id of mosquitto>")),(0,i.kt)("h3",p({},{id:"creating-a-password-file"}),"Creating a password file"),(0,i.kt)("p",null,"To create a password file, use the mosquitto_passwd utility, use the line below. You will be asked for the password. Note that -c means an existing file will be overwritten:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"mosquitto_passwd -c <password file> <username>")),(0,i.kt)("p",null,"To add more users to an existing password file, or to change the password for an existing user, leave out the -c argument:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"mosquitto_passwd <password file> <username>")),(0,i.kt)("p",null,"To remove a user from a password file:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"mosquitto_passwd -D <password file> <username>")),(0,i.kt)("p",null,"You can also add/update a username and password in a single line, but be aware that this means the password is visible on the command line and in any command history:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"mosquitto_passwd <password file> <username> <password>")),(0,i.kt)("h3",p({},{id:"configuring-the-broker"}),"Configuring the broker"),(0,i.kt)("p",null,"To start using your password file you must add the password_file option to your configuration file:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"password_file <path to the configuration file>")),(0,i.kt)("p",null,"The password file must be able to be read by whatever user Mosquitto is running as. On Linux/POSIX systems this will typically be the mosquitto user, and /etc/mosquitto/password_file is a good place for the file itself."),(0,i.kt)("p",null,"If you are using the per_listener_settings true option to have separate security settings per listener, you must place the password file option after the listener it is for:"),(0,i.kt)("pre",null,(0,i.kt)("code",p({parentName:"pre"},{}),"listener 1883\npassword_file /etc/mosquitto/password_file\n")),(0,i.kt)("h2",p({},{id:"authentication-plugins"}),"Authentication plugins"),(0,i.kt)("p",null,"If you want more control over authentication of your users than is offered by a password file, then an authentication plugin may be suitable for you. The features offered depend on which plugin you use."),(0,i.kt)("p",null,"Configuring the plugin\nConfiguring a plugin varies depending on the version of Mosquitto plugin interface the plugin was written for, either version 2.0 and up, or 1.6.x and earlier."),(0,i.kt)("p",null,"For 1.6.x and below, use the auth_plugin option. These plugins are also supported by version 2.0:"),(0,i.kt)("pre",null,(0,i.kt)("code",p({parentName:"pre"},{}),"listener 1883\nauth_plugin <path to plugin>\n")),(0,i.kt)("p",null,"Some plugins require extra configuration which will be described in their documentation."),(0,i.kt)("p",null,"For 2.0 and up, use the plugin option:"),(0,i.kt)("pre",null,(0,i.kt)("code",p({parentName:"pre"},{}),"listener 1883\nplugin <path to plugin>\n")),(0,i.kt)("h3",p({},{id:"available-plugins"}),"Available plugins"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[Dynamic security]"," (./dynamic-security.md), for 2.0 and up only, provided by the Mosquitto project to give flexible in-broker clients, groups, and roles that can be administered remotely."),(0,i.kt)("li",{parentName:"ul"},"[mosquitto-go-auth]"," (",(0,i.kt)("a",p({parentName:"li"},{href:"https://github.com/iegomez/mosquitto-go-auth"}),"https://github.com/iegomez/mosquitto-go-auth"),"), which offers the use of a variety of backends to store user data, such as mysql, jwt, or redis.")),(0,i.kt)("h2",p({},{id:"unauthenticated-access"}),"Unauthenticated access"),(0,i.kt)("p",null,"To configure unauthenticated access, use the allow_anonymous option:"),(0,i.kt)("pre",null,(0,i.kt)("code",p({parentName:"pre"},{}),"listener 1883\nallow_anonymous true\n")),(0,i.kt)("p",null,"It is valid to allow anonymous and authenticated access on the same broker. In particular the dynamic security plugin allows you to assign different rights to anonymous users than to authenticated users, which may be useful for read-only access to data for example."))}b.isMDXComponent=!0}}]);