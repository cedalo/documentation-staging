"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[29569],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),g=p(n),d=r,m=g["".concat(s,".").concat(d)]||g[d]||u[d]||i;return n?o.createElement(m,a(a({ref:t},c),{},{components:n})):o.createElement(m,a({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var p=2;p<i;p++)a[p]=n[p];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}g.displayName="MDXCreateElement"},98389:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>k,contentTitle:()=>d,default:()=>y,frontMatter:()=>g,metadata:()=>m,toc:()=>f});var o=n(3905),r=Object.defineProperty,i=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&c(e,n,t[n]);if(l)for(var n of l(t))p.call(t,n)&&c(e,n,t[n]);return e};const g={id:"logs",title:"Logs",sidebar_label:"Logs"},d=void 0,m={unversionedId:"monitoring/logs",id:"monitoring/logs",title:"Logs",description:"Logging in Mosquitto provides essential insight into the operation of your MQTT broker. It records key activities such as client connections, disconnections, published messages, and subscriptions. These logs are invaluable for system monitoring, troubleshooting issues, tracking operational status, and enhancing security.",source:"@site/mosquitto/monitoring/logs.md",sourceDirName:"monitoring",slug:"/monitoring/logs",permalink:"/documentation-staging/mosquitto/next/monitoring/logs",draft:!1,tags:[],version:"current",frontMatter:{id:"logs",title:"Logs",sidebar_label:"Logs"},sidebar:"someSidebar",previous:{title:"System Topics",permalink:"/documentation-staging/mosquitto/next/monitoring/system-topics"},next:{title:"Available Metrics",permalink:"/documentation-staging/mosquitto/next/monitoring/metrics/available-metrics"}},k={},f=[{value:"Configure logs",id:"configure-logs",level:2},{value:"Viewing logs",id:"viewing-logs",level:2},{value:"Docker",id:"docker",level:3},{value:"RPM",id:"rpm",level:3},{value:"Log storage",id:"log-storage",level:2},{value:"Docker",id:"docker-1",level:3},{value:"Integration with external log management",id:"integration-with-external-log-management",level:4},{value:"RPM",id:"rpm-1",level:3}],v={toc:f};function y(e){var t,n=e,{components:r}=n,c=((e,t)=>{var n={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&p.call(e,o)&&(n[o]=e[o]);return n})(n,["components"]);return(0,o.kt)("wrapper",(t=u(u({},v),c),i(t,a({components:r,mdxType:"MDXLayout"}))),(0,o.kt)("p",null,"Logging in Mosquitto provides essential insight into the operation of your MQTT broker. It records key activities such as client connections, disconnections, published messages, and subscriptions. These logs are invaluable for system monitoring, troubleshooting issues, tracking operational status, and enhancing security."),(0,o.kt)("h2",u({},{id:"configure-logs"}),"Configure logs"),(0,o.kt)("p",null,"Logging in Mosquitto is controlled via the ",(0,o.kt)("inlineCode",{parentName:"p"},"mosquitto.conf")," configuration file. The most important options are:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"log_dest"),": Sets where logs go (",(0,o.kt)("inlineCode",{parentName:"p"},"console"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"file <filepath>"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"syslog"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"topic")," (publishes under ",(0,o.kt)("inlineCode",{parentName:"p"},"$SYS/broker/log/<severity>"),"), or ",(0,o.kt)("inlineCode",{parentName:"p"},"none"),")."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"log_type"),": Specifies what is logged (",(0,o.kt)("inlineCode",{parentName:"p"},"info"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"error"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"warning"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"notice"),", or ",(0,o.kt)("inlineCode",{parentName:"p"},"all"),")."),(0,o.kt)("h2",u({},{id:"viewing-logs"}),"Viewing logs"),(0,o.kt)("h3",u({},{id:"docker"}),"Docker"),(0,o.kt)("p",null,"To view logs for a specific container:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker logs <container_name>\n")),(0,o.kt)("p",null,"For real-time log output:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker logs -f <container_name>\n")),(0,o.kt)("p",null,"To see logs for a specific service when using Docker Compose:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker-compose logs <service_name>\n")),(0,o.kt)("p",null,"or for all services:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker-compose logs\n")),(0,o.kt)("h3",u({},{id:"rpm"}),"RPM"),(0,o.kt)("p",null,"You can view logs for a specific service with:\n",(0,o.kt)("inlineCode",{parentName:"p"},"journalctl -u <service-name>")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"mosquitto"),(0,o.kt)("li",{parentName:"ul"},"mosquitto-platform")),(0,o.kt)("h2",u({},{id:"log-storage"}),"Log storage"),(0,o.kt)("h3",u({},{id:"docker-1"}),"Docker"),(0,o.kt)("p",null,"By default, Docker stores logs in JSON format under ",(0,o.kt)("inlineCode",{parentName:"p"},"/var/lib/docker/containers/<container-id>/"),".\nThese logs are persisted as long as the container exists and disk space is available.\nThe default logging driver is json-file, but you can configure other drivers, e.g., syslog, journald, etc."),(0,o.kt)("p",null,"Filtering, tailing, and searching logs\nSee last 100 lines:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker logs --tail 100 <container_name>\n")),(0,o.kt)("p",null,"View logs since a specific time:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),'docker logs --since "2025-08-18T10:00:00" <container_name>\n')),(0,o.kt)("p",null,"Filter logs by pattern with grep:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),'docker logs <container_name> | grep "PATTERN"\n')),(0,o.kt)("h4",u({},{id:"integration-with-external-log-management"}),"Integration with external log management"),(0,o.kt)("p",null,"For centralized log storage (like with journald/rsyslog), configure Docker\u2019s logging driver to e.g. syslog or journald:"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"docker run --log-driver=syslog ...\n")),(0,o.kt)("h3",u({},{id:"rpm-1"}),"RPM"),(0,o.kt)("p",null,"By default, logs are stored under ",(0,o.kt)("inlineCode",{parentName:"p"},"/run/log/journal/"),"."),(0,o.kt)("p",null,"These logs are in binary format and are not persisted across server reboots."),(0,o.kt)("p",null,"To enable persistence, ",(0,o.kt)("inlineCode",{parentName:"p"},"journald")," must be configured accordingly (e.g., by enabling persistent storage). In that case, logs will be written to ",(0,o.kt)("inlineCode",{parentName:"p"},"/var/log/journal/"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Integration with rsyslog:"),"\nBy default, the rsyslog daemon pulls logs from systemd\u2019s journal via the imjournal module. These logs are collected in plaintext under: ",(0,o.kt)("inlineCode",{parentName:"p"},"/var/log/messages"),"\nYou can adjust this behavior in ",(0,o.kt)("inlineCode",{parentName:"p"},"/etc/rsyslog.conf"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Custom plaintext log files:"),"\nIf you need logs written directly to custom plaintext files (instead of being managed by journald), you can override the service configuration. For example:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"systemctl edit mosquitto-platform"),"\nor\n",(0,o.kt)("inlineCode",{parentName:"p"},"systemctl edit mosquitto")),(0,o.kt)("p",null,"Then add:\n\xb4\xb4\xb4\n","[Service]","\nStandardOutput=append:/path/to/your/stdout.log\nStandardError=append:/path/to/your/stderr.log"),(0,o.kt)("pre",null,(0,o.kt)("code",u({parentName:"pre"},{}),"#### Log rotation:\nSince custom log files can grow quickly, they should be managed with a log rotation tool such as `logrotate` to prevent uncontrolled disk usage.\n")))}y.isMDXComponent=!0}}]);