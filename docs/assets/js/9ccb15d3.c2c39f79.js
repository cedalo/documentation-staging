"use strict";(self.webpackChunkstreamsheets=self.webpackChunkstreamsheets||[]).push([[89015],{83166:(e,t,n)=>{var a=n(64836);t.Z=void 0;var o=a(n(64938)),r=n(85893),s=(0,o.default)((0,r.jsx)("path",{d:"M12 2 4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"}),"GppGood");t.Z=s},52865:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>h,default:()=>C,frontMatter:()=>m,metadata:()=>f,toc:()=>k});var a=n(3905),o=n(49044),r=Object.defineProperty,s=Object.defineProperties,i=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&u(e,n,t[n]);if(c)for(var n of c(t))p.call(t,n)&&u(e,n,t[n]);return e};const m={id:"opcuareq",title:"OPC UA",sidebar_label:"OPC UA"},h=void 0,f={unversionedId:"guides/connections/opcuareq",id:"guides/connections/opcuareq",title:"OPC UA",description:"OPC UA Connection",source:"@site/streamsheets/guides/connections/opcuareq.md",sourceDirName:"guides/connections",slug:"/guides/connections/opcuareq",permalink:"/documentation-staging/streamsheets/next/guides/connections/opcuareq",draft:!1,tags:[],version:"current",frontMatter:{id:"opcuareq",title:"OPC UA",sidebar_label:"OPC UA"},sidebar:"someSidebar",previous:{title:"MQTT",permalink:"/documentation-staging/streamsheets/next/guides/connections/mqtt"},next:{title:"TimescaleDB",permalink:"/documentation-staging/streamsheets/next/guides/connections/timescale"}},g={},k=[{value:"OPC UA Connection <PremiumFeature />",id:"opc-ua-connection-",level:2},{value:"Receive OPC UA values",id:"receive-opc-ua-values",level:3},{value:"Transmit OPC UA values",id:"transmit-opc-ua-values",level:3}],v={toc:k};function C(e){var t,r=e,{components:u}=r,m=((e,t)=>{var n={};for(var a in e)l.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&c)for(var a of c(e))t.indexOf(a)<0&&p.call(e,a)&&(n[a]=e[a]);return n})(r,["components"]);return(0,a.kt)("wrapper",(t=d(d({},v),m),s(t,i({components:u,mdxType:"MDXLayout"}))),(0,a.kt)("h2",d({},{id:"opc-ua-connection-"}),"OPC UA Connection ",(0,a.kt)(o.Z,{mdxType:"PremiumFeature"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"URL:")," The URL to the OPC UA server."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Username, Password:")," To authenticate a client at a Server, it is common to use a username and password to sign in."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Authorization:"),"There are different possible authorization methods. Depending on the connection a different approach\nwas chosen. Supported authorization methods are: \u201cNone\u201d, \u201cSign\u201d and \u201cSign&Encrypt\u201d."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"OPCUA",src:n(77199).Z,width:"604",height:"478"})),(0,a.kt)("p",null,'The connection can be used via functions or connected to an Inbox.\nUse the "Subscription" menu to set the nodes (e.g. ns=2;s=MyTemperature) you want to listen to and assign them an Inbox:'),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"OPCUA",src:n(74405).Z,width:"609",height:"413"})),(0,a.kt)("p",null,'This simple Tutorial shows how to read information about an OPC UA\nServer. To begin with, we have to set up a connection to the OPC UA Server of our choice.\nOpen up the "Connection Menu" of your App and select OPC UA. Enter your connection details.\nIf this is set up, we can proceed to start gathering information.'),(0,a.kt)("admonition",d({},{type:"info"}),(0,a.kt)("p",{parentName:"admonition"},"You can find an example OPC UA server at ",(0,a.kt)("a",d({parentName:"p"},{href:"http://opcuaserver.com/"}),"http://opcuaserver.com/"),".\nTo connect to the Streamsheets internal OPC UA server, use\n",(0,a.kt)("em",{parentName:"p"},"stream sheets-service-occur")," as hostname and\n",(0,a.kt)("em",{parentName:"p"},"API/v1.0/OPCUA/cedalo/machine server")," as the resource path. Make sure the server is set up.")),(0,a.kt)("h3",d({},{id:"receive-opc-ua-values"}),"Receive OPC UA values"),(0,a.kt)("p",null,"There are multiple ways to access OPC UA data. Configure an Inbox to poll data in a set interval directly, or use a\nfunction in your sheet to trigger a single request to the OPC UA server."),(0,a.kt)("p",null,'Both approaches will need the specific node ids of your OPC UA parameter. These consist of a namespace indicator and the\nparameter id. (e.g. ns=2; s="Parameter").\n',(0,a.kt)("em",{parentName:"p"},"We are working on a feature to directly scan and access existing OPC UA nodes through Streamsheets. Until then, it is\nnecessary to detect the node ids by hand.\nA good tool to identify nodes could be\nthe ",(0,a.kt)("a",d({parentName:"em"},{href:"https://downloads.prosysopc.com/opc-ua-client-downloads.php"}),"Prosys OPC UA Client"),"\nor ",(0,a.kt)("a",d({parentName:"em"},{href:"https://www.unified-automation.com/de/downloads/opc-ua-clients.html"}),"UAexpert"),". You can also use a browser\nclient: ",(0,a.kt)("a",d({parentName:"em"},{href:"https://www.uaclient.com/"}),"https://www.uaclient.com/")," ")),(0,a.kt)("p",null,"![OPCUACOnnection]"," (../../_images/Link.png)"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Example Connection")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Via Inbox:")," In your OPC UA connection switch to the tab. Enter the node id(s) you are interested in and select the\ntarget inbox.\nIn a running App, the iNbox will collect the messages in the entered interval."),(0,a.kt)("p",null,"![OPCUAConnectionnodeid]"," ()../../_images/Link.png)"),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Example Inbox connection")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"OPCUA.READ():")," The second way to request data from an OPC UA server is\nvia ",(0,a.kt)("a",d({parentName:"p"},{href:"../../functions/connection/opcuaread"}),"OPCUA.READ"),".\nEnter the function in a cell and reference the above-created connection.\nEnter the Node ID and the Target (e.g. ","[INBOX]","(../../functions/stream sheet/inbox))."),(0,a.kt)("p",null,"![READPayload]"," (../../_images/Link.png)"),(0,a.kt)("p",null,"Every new calculation step now triggers ",(0,a.kt)("a",d({parentName:"p"},{href:"../../functions/connection/opcuaread"}),"OPCUA.READ")," and therefore a request to\nthe OPC UA server. It will display the function in the assigned Target as soon as the response arrives."),(0,a.kt)("h3",d({},{id:"transmit-opc-ua-values"}),"Transmit OPC UA values"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"OPCUA.WRITE:")," It is also possible to update existing OPC UA Variables\nwith the OPCUA.WRITE formula. Similar to before, create the ",(0,a.kt)("a",d({parentName:"p"},{href:"../../functions/connection/opcuawrite"}),"OPCUA.WRITE"),"\nfunction, select your connection, add the node\nid range and target."),(0,a.kt)("p",null,"![WritePayload]"," (../../_images/Link.png)"),(0,a.kt)("p",null,"The Node Value Range has to consist of two key-value pairs.\nThe value is written on the node id and the data type is used."))}C.isMDXComponent=!0},49044:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),o=n(74889),r=n(62659),s=n(83166);function i({}){return a.createElement(o.Z,{sx:{margin:"5px",color:"#ffffff",backgroundColor:r.Z[500]},size:"small",icon:a.createElement(s.Z,{style:{color:"white"},size:"small"}),label:"Premium"})}},77199:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/OPCUAConnection-7f58905448e4df09fe686db9fa1f8fb9.png"},74405:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/OPCUAsub-de0bceac0ab1aaf3c3a1145a287f3da1.png"}}]);