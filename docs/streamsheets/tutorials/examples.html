

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Create &amp; Use Streams &mdash; Streamsheets 2.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Add-Ons" href="addons.html" />
    <link rel="prev" title="Tools &amp; Charts" href="uielements.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Streamsheets
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maincomponents.html">Main Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="uielements.html">Tools &amp; Charts</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Create &amp; Use Streams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#http-rest-request">HTTP/REST Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#opc-ua">OPC UA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mongodb">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#influxdb">InfluxDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timescaledb">TimescaleDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mail-send">MAIL.SEND</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="addons.html">Add-Ons</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../others.html">Other</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releasenotes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference external" href="http://www.cedalo.com">Cedalo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://forum.cedalo.com/">Forum</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Streamsheets</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../tutorials.html">Tutorials</a> &raquo;</li>
        
      <li>Create &amp; Use Streams</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-use-streams">
<span id="createstream"></span><h1>Create &amp; Use Streams<a class="headerlink" href="#create-use-streams" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="http-rest-request">
<span id="resttutorial"></span><h2>HTTP/REST Request<a class="headerlink" href="#http-rest-request" title="Permalink to this headline">¬∂</a></h2>
<p>This tutorial covers two different kind of HTTP/REST Calls, one is <strong>POST</strong> and the other is <strong>GET</strong>. (In older versions of Streamsheets we use the term REST, which is changed to HTTP starting v1.6)
The differences are that with a ‚ÄúPOST‚Äù information is transmitted from the HTTP Client to a server and a ‚ÄúGET‚Äù transmits information to the HTTP Client from the server.
To add a HTTP function to a <a class="reference internal" href="../glossary.html#term-streamsheet"><span class="xref std std-term">Streamsheet</span></a> you will need a <a class="reference internal" href="../glossary.html#term-connector"><span class="xref std std-term">Connector</span></a> and a <a class="reference internal" href="../glossary.html#term-producer"><span class="xref std std-term">Producer</span></a>, based on the HTTP Client Provider. Start by creating the Connector in the Stream Tab of your Dashboard. You can leave all fields empty to be able to utilize this Connector for any URL. If you want to create specific Connectors for every webpage, type in the Base URL. Same goes for the Producer. Create a Producer based on the just created Connector and leave it empty.  We can now select the Producer within the <a class="reference internal" href="uielements.html#functionwizard"><span class="std std-ref">Function Wizard</span></a>.</p>
<p><strong>1. Method ‚ÄúPost‚Äù:</strong>
As an example, for a HTTP Request with the method ‚ÄúPOST‚Äù, we will create an alert service for Slack.
Slack is a messenger, which offers the possibility to add self-made applications. This option will be used to add an Alert Application to a Slack channel, posting status updates.</p>
<p>To begin create such an <a class="reference external" href="https://api.slack.com/apps/">App in Slack</a>
and add an Incoming <a class="reference external" href="https://api.slack.com/incoming-webhooks/">Webhook</a>. This generates the HTTP.Request URL we will be posting information to. Choose a Channel on Slack to add your Application to. This is where we will post the information to.
Now we can start building an App in Streamsheets. Create a new <a class="reference internal" href="../glossary.html#term-app"><span class="xref std std-term">App</span></a> and create a <a class="reference internal" href="../glossary.html#term-json"><span class="xref std std-term">JSON</span></a> Range with the key Value being ‚Äútext‚Äù and the Value being any message you would like to send.
Create a HTTP Request function over the Function Wizard and select ‚ÄúPOST‚Äù as the method. Add the created URL and select the JSON Range as the body. Choose a Target (e.g. a cell range) for  the response message of the server. Now with every new Step, the App will send your message to Slack üòä</p>
<p><strong>2. Method ‚ÄúGET‚Äù:</strong>
The ‚ÄúGET‚Äù method is very similar to the ‚ÄúPOST‚Äù method, but in this case we do not need to define any message, because we will be consuming messages.
A good example is the ‚ÄúAPI of Ice and Fire‚Äù <a class="reference external" href="https://anapioficeandfire.com/">https://anapioficeandfire.com/</a>. It is an HTTP Request based online wiki for Game of Thrones related information.
Depending on the URL, different Information can be accessed and displayed.
Lets choose the following URL: <a class="reference external" href="https://anapioficeandfire.com/api/characters/583">https://anapioficeandfire.com/api/characters/583</a>
It displays all information regarding Jon Snow in a JSON-Object.
So lets again create a new App. Add a HTTP Request Function with the help of the Function Wizard. Enter the URL, select ‚ÄúGET‚Äù as the method and chose the Target, where the information should be displayed (e.g. <a class="reference internal" href="../functions/streamsheet/inbox.html#inboxf"><span class="std std-ref">INBOX</span></a>()). Confirm your input by clicking ‚ÄúOK‚Äù.
After starting the App the requested information will now appear in the Target Range.</p>
</div>
<div class="section" id="opc-ua">
<span id="opcuafunctions"></span><h2>OPC UA<a class="headerlink" href="#opc-ua" title="Permalink to this headline">¬∂</a></h2>
<p><img alt="star" src="../_../_images/star.svg" /> This is a <a class="reference external" href="https://cedalo.com/download/">Streamsheets Professional</a> feature.</p>
<p>This simple Tutorial shows how to read information of an <a class="reference internal" href="../glossary.html#term-opc-ua"><span class="xref std std-term">OPC UA</span></a> Server.
To begin with we have to create Streams, which are connected the OPC UA Server of our choice.</p>
<p>Open up the Stream Tab of your Dashboard and create a new OPC UA <a class="reference internal" href="../glossary.html#term-connector"><span class="xref std std-term">Connector</span></a>. Enter the URL of the Server you want to connect to. In this tutorial the OPC UA Server is in the local network. You will need your own OPC UA Server or go to <a class="reference external" href="http://opcuaserver.com/">http://opcuaserver.com/</a> where you can find a series of open OPC UA Server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To connect to the Streamsheets internal OPC UA server use <em>streamsheets-service-opcua</em> as host name and <em>api/v1.0/OPCUA/cedalo/machineserver</em> as the resource path.</p>
</div>
<p><strong>OPC UA Consumer &amp; Producer:</strong>
Create a new Consumer, based on the created Connector. Enter the Node ID you want receive and safe your changes (the polling interval defines the interval where the Consumer requests new data from the server). Create a Producer, again based on the newly created Connector.</p>
<p>Now we are ready to poll and send information to the specified server. Create a new App and select the newly created Consumer. Just start the App and the Consumer will instantly forward messages into the Inbox.</p>
<p><strong>OPCUA.READ:</strong>
A second way to receive OPC UA Messages in a <a class="reference internal" href="../glossary.html#term-streamsheet"><span class="xref std std-term">Streamsheet</span></a> is over the <a class="reference internal" href="../functions/streams/opcuaread.html#opcuaread"><span class="std std-ref">OPCUA.READ</span></a> function. Create a new Streamsheet by clicking the plus sign in the bottom right corner and select a cell. Open up the Function Wizard, select the <a class="reference internal" href="../functions/streams/opcuaread.html#opcuaread"><span class="std std-ref">OPCUA.READ</span></a> function and the created Producer. Enter the Node ID and the Target (e.g. <a class="reference internal" href="../functions/streamsheet/inbox.html#inboxf"><span class="std std-ref">INBOX</span></a>()) and confirm your input by clicking ‚ÄúOK‚Äù.</p>
<p>With every new calculation step an <a class="reference internal" href="../functions/streams/opcuaread.html#opcuaread"><span class="std std-ref">OPCUA.READ</span></a> will prompt a new message in the <a class="reference internal" href="../maincomponents/streamsheet.html#inbox"><span class="std std-ref">Inbox</span></a>.</p>
<p><strong>OPCUA.WRITE:</strong>
It is also possible to update existing OPC UA Variables with the OPCUA.WRITE formular. Similiar to before, use the Function Wizard and select OPCUA.WRITE. Choose the right Producer, add the NODE Id and Target Range.</p>
</div>
<div class="section" id="mongodb">
<span id="mongofunctions"></span><h2>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¬∂</a></h2>
<p>To store data and retrieve information Streamsheets are able to connect to a <a class="reference internal" href="../glossary.html#term-mongo"><span class="xref std std-term">MongoDB</span></a>. <a class="reference internal" href="addons.html#mongodb"><span class="std std-ref">Here</span></a> you can learn how to add a MongoDB to your current Streamsheets installation.</p>
<p>Start connecting the MongoDB to your Streamsheets by setting up a MongoDB Connector. Enter the URL (or if working with Mongo for Docker the container name) in the Host(s) field. All other settings are optional.
Streamsheets offers five Mongo specific functions within the <a class="reference internal" href="uielements.html#functionwizard"><span class="std std-ref">Function Wizard</span></a>: <a class="reference internal" href="../functions/streams/mongostore.html#mongostore"><span class="std std-ref">MONGO.STORE()</span></a>, <a class="reference internal" href="../functions/streams/mongocount.html#mongocount"><span class="std std-ref">MONGO.COUNT()</span></a>, <a class="reference internal" href="../functions/streams/mongodelete.html#mongodelete"><span class="std std-ref">MONGO.DELETE()</span></a>, <a class="reference internal" href="../functions/streams/mongoquery.html#mongoquery"><span class="std std-ref">MONGO.QUERY()</span></a> and <a class="reference internal" href="../functions/streams/mongoaggregate.html#mongoaggregate"><span class="std std-ref">MONGO.AGGREGATE()</span></a>.
Setup a Producer on top of the just created Connector and you are ready to go.</p>
<p>In a Streamsheet open the ‚ÄúFunction Wizard‚Äù to gain convenient access to the MongoDB functions.</p>
<p><strong>MONGO.STORE():</strong></p>
<p><em>=MONGO.STORE(‚ÄúStream‚Äù,‚ÄùCollection‚Äù,‚ÄùDocument‚Äù)</em></p>
<p><a class="reference internal" href="../_../_images/MongoStore.png"><img alt="MongoS" src="../_../_images/MongoStore.png" style="width: 303.2px; height: 135.20000000000002px;" /></a></p>
<p>As soon as your MongoDB Connector and Producer is set up you can start storing data.
Click on a cell, open the function wizard and select MONGO.STORE. Remember the calculation order of a Streamsheet (top to bottom, left to right), this might play a role in the structure of your logic.</p>
<p><em>Stream:</em>
The ‚ÄúFunction Wizard‚Äù automatically selects a stream. Make sure the right one is selected.</p>
<p><em>Collection:</em>
MongoDB has different places to store data at. These are called collections. Type in a name of a collection. The collection will automatically be created, if not already existing.</p>
<p><em>Document:</em>
The document contains your data. It is a simple cell range of key and value pairs. It is also possible to order them in a hierarchy.</p>
<p>With every calculation one document will be stored in the selected collection.</p>
<p><strong>MONGO.QUERY():</strong></p>
<p><em>=MONGO.QUERY(‚ÄúStream‚Äù,‚ÄùCollection‚Äù,‚ÄùQuery‚Äù,‚ÄùTarget‚Äù,‚ÄùResultKeys‚Äù,‚ÄùPageSize‚Äù,‚ÄùPage‚Äù,‚ÄùSort‚Äù,‚ÄùTimeout‚Äù)</em></p>
<p><a class="reference internal" href="../_../_images/MongoQuery.png"><img alt="MongoQ" src="../_../_images/MongoQuery.png" style="width: 452.8px; height: 105.60000000000001px;" /></a></p>
<p>To lookup data from a MongoDB collection use the function MONGO.QUERY. It is possible to access either all stored documents or a subset of them.</p>
<p><em>Stream:</em>
Again select the right Producer to connect to the right database.</p>
<p><em>Collection:</em>
Type in the collection you used in the MONGO.STORE function.</p>
<p><em>Query:</em>
The query filters the data and only gives back documents, which are match or are composed of the query. Define one or more key value pairs the documents you are searching for have to contain. E.g. you have saved a lot of customer information and now need the information for all customer with the name ‚ÄúJulia‚Äù, define a horizontal cell range containing ‚Äúname‚Äù on the left and ‚ÄúJulia‚Äù on the right.
To access all data just leave this section empty.</p>
<p><em>Target:</em>
Define where the response of the database should be displayed. Choose a cell range or =INBOX(); =OUTBOX() as a target. Be careful, the cell range maybe to small to display all information.</p>
<p><em>Result Keys:</em>
The Query always gives back all the information saved in a document. If you are only interested in a subset write each key in a cell and enter the cell/ cell range in the Result Key field.</p>
<p><em>Page Size:</em>
The Page Size defines how many results will be shown in the response of your query per page. As a default, page 1 will be returned.</p>
<p><em>Page:</em>
Select the page you want to get back. Example: Enter page size = 5 and page = 2. The query will return entry 6-10.</p>
<p><em>Sort:</em>
You can either sort by time using 1 and -1 or you can sort alphabetically by using a cell range with the key to sort with and a 1 or -1.  1 = descending; -1 = ascending.</p>
<p><em>Timeout:</em>
Tells the function how long to wait for a response from the database(in ms).</p>
<p><strong>MONGO.DELETE():</strong></p>
<p><em>=MONGO.DELETE(‚ÄúStream‚Äù,‚ÄùCollection‚Äù,‚ÄùQuery‚Äù,‚ÄùTarget‚Äù,‚ÄùTimeout‚Äù)</em></p>
<p><a class="reference internal" href="../_../_images/MongoDelete.png"><img alt="MongoD" src="../_../_images/MongoDelete.png" style="width: 353.6px; height: 102.4px;" /></a></p>
<p>Delete documents in a collection.</p>
<p><em>Stream:</em>
Select the Stream connected to your MongoDB.</p>
<p><em>Collection:</em>
Enter the collection you want to adjust entries in.</p>
<p><em>Query:</em>
All documents with the defined key value pair/s will be deleted from the collection.</p>
<p><em>Target:</em>
MONGO.DELETE returns the amount of objects that have been deleted. To get this information define either a cell range of at least 2x2 or enter =INBOX()/=OUTBOX().</p>
<p><em>Timeout:</em>
Tells the function how long to wait for a response from the database(in ms).</p>
<p><strong>MONGO.COUNT():</strong></p>
<p><em>=MONGO.COUNT(‚ÄúStream‚Äù,‚ÄùCollection‚Äù,‚ÄùQuery‚Äù,‚ÄùTarget‚Äù,‚ÄùTimeout‚Äù)</em></p>
<p><a class="reference internal" href="../_../_images/MongoCount.png"><img alt="MongoC" src="../_../_images/MongoCount.png" style="width: 345.6px; height: 88.80000000000001px;" /></a></p>
<p>If you are interested in the amount of documents stored in a collection use MONGO.COUNT().</p>
<p><em>Stream:</em>
Select the Stream connected to your MongoDB.</p>
<p><em>Collection:</em>
Enter the collection you want to count entries in.</p>
<p><em>Query:</em>
Enter a cell range of key value pairs. All documents with the defined key value pair/s will be counted.</p>
<p><em>Target:</em>
MONGO.COUNT returns the amount of objects that have been counted. To get this information define either a cell range of at least 1x2 or enter =INBOX()/=OUTBOX().</p>
<p><em>Timeout:</em>
Tells the function how long to wait for a response from the database(in ms).</p>
<p><strong>MONGO.REPLACE():</strong></p>
<p><em>=MONGO.REPLACE(‚ÄúStream‚Äù,‚ÄùCollection‚Äù,‚ÄùQuery‚Äù,‚ÄùDocument‚Äù,‚ÄùUpsert‚Äù)</em></p>
<p><a class="reference internal" href="../_../_images/MongoReplace.png"><img alt="MongoR" src="../_../_images/MongoReplace.png" style="width: 410.40000000000003px; height: 154.4px;" /></a></p>
<p>To replace data in a collection, use the MONGO.REPLACE() function.</p>
<p><em>Stream:</em>
Select the Stream connected to your MongoDB.</p>
<p><em>Collection:</em>
Enter the collection you want to replace entries in.</p>
<p><em>Query:</em>
The query searches for documents within a collection to replace.</p>
<p><em>Document:</em>
Define a document to replace existing data with and enter the cell range here.</p>
<p><em>Upsert:</em>
TRUE or FALSE. Upsert decides, if, when a query can¬¥t be found, the document is added to the collection or dismissed.</p>
<p>Here is a small example:</p>
<div class="line-block">
<div class="line"><a class="reference internal" href="../_../_images/MongoDemo.gif"><img alt="MongoDemo" src="../_../_images/MongoDemo.gif" style="width: 832.0px; height: 468.0px;" /></a></div>
<div class="line"><em>All five Mongo functions used in one GIF.</em></div>
<div class="line"><em>Note: In version 1.5 the icon for the stream functions was changed</em> <a class="reference internal" href="../_../_images/Streamfunction.png"><img alt="StreamF" src="../_../_images/Streamfunction.png" style="width: 22.5px; height: 21.75px;" /></a></div>
</div>
</div>
<div class="section" id="influxdb">
<span id="influx"></span><h2>InfluxDB<a class="headerlink" href="#influxdb" title="Permalink to this headline">¬∂</a></h2>
<p>To store data and retrieve information Streamsheets are able to connect to a <a class="reference internal" href="../glossary.html#term-influx"><span class="xref std std-term">InfluxDB</span></a>. <a class="reference internal" href="addons.html#influxdb"><span class="std std-ref">Here</span></a> you can learn how to add a InfluxDB to your current Streamsheets installation.</p>
<p>First of all we start by providing a <a class="reference internal" href="../glossary.html#term-rest"><span class="xref std std-term">REST</span></a> Client <a class="reference internal" href="../glossary.html#term-connector"><span class="xref std std-term">Connector</span></a> and the corresponding <a class="reference internal" href="../glossary.html#term-producer"><span class="xref std std-term">Producer</span></a>. If these are not yet available, go to the <a class="reference internal" href="../maincomponents/administration.html#administration"><span class="std std-ref">Administration</span></a> menu and create a new Connector and Producer. If you have any questions we recommend to have a look at the <a class="reference internal" href="#resttutorial"><span class="std std-ref">REST.REQUEST tutorial</span></a>.</p>
<div class="line-block">
<div class="line"><strong>Create a Database:</strong></div>
<div class="line">Create a database using the REST.REQUEST function. Click on the <a class="reference internal" href="uielements.html#functionwizard"><span class="std std-ref">Stream Function Wizard</span></a>, select the right Producer and use the POST Method. Add the desired database name at the end of the URL.</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line"><strong>URL:</strong> <em>http://influxdb:8086/query?q=CREATE DATABASE &lt;Database name&gt;</em></div>
<div class="line"><strong>Example URL:</strong> <em>http://influxdb:8086/query?q=CREATE DATABASE mydb</em></div>
</div>
</div></blockquote>
<p>To create a database it is sufficient to execute the REST.REQUEST once.</p>
<div class="line-block">
<div class="line"><strong>Write Data:</strong></div>
<div class="line">To write data into the InfluxDB, we have to use the <a class="reference internal" href="../functions/streams/request.html#request"><span class="std std-ref">REQUEST</span></a> function. The ParameterJSON range of the function contains 4 parameters. The first is the <a class="reference internal" href="../glossary.html#term-url"><span class="xref std std-term">URL</span></a> which must contain the name of the database. It`s also possible to add a password, precision etc. The second one is the method which is POST when writing the data into the InfluxDB. Third is the body in which the data is located. To successfully parse and write Data in InfluxDB you have to use the <a class="reference internal" href="../glossary.html#term-line-protocol"><span class="xref std std-term">line protocol</span></a>! The InfluxDB line protocol is a text based format for writing points to the database. A single line of text in line protocol format represents one data point in InfluxDB. It informs InfluxDB of the point‚Äôs measurement, tag set, field set, and timestamp. Tag set and timestamp are optional. It is important that the spaces and commas are set correctly!</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line"><strong>Syntax:</strong> <em>&lt;measurement&gt;[,&lt;tag_key&gt;=&lt;tag_value&gt;[,&lt;tag_key&gt;=&lt;tag_value&gt;]] &lt;field_key&gt;=&lt;field_value&gt;[,&lt;field_key&gt;=&lt;field_value&gt;] [&lt;timestamp&gt;]</em></div>
<div class="line"><strong>Example:</strong> <em>h2o_feet,location=freiburg water_level=4</em></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line">In our example we use a measurement called ‚Äúh20_feet‚Äù. The measurement has one tag key (location) which has one tag values: freiburg. ‚Äúwater_level‚Äù is our field_key which stores float field values in the ‚Äúmydb‚Äù database.</div>
<div class="line">Finally you have to add the ‚ÄúJson‚Äù Parameter with FALSE as value. That`s it!</div>
</div>
<p><a class="reference internal" href="../_../_images/InfluxDB-Demo.gif"><img alt="influx" src="../_../_images/InfluxDB-Demo.gif" style="width: 832.0px; height: 468.0px;" /></a></p>
<p><em>Write Data in InfluxDB with the REQUEST function</em></p>
<div class="line-block">
<div class="line"><strong>Query Data:</strong></div>
<div class="line">To Query Data we use the <a class="reference internal" href="../functions/streams/restrequest.html#restrequest"><span class="std std-ref">REST.REQUEST</span></a> function with the GET Method and write the <a class="reference internal" href="../glossary.html#term-query"><span class="xref std std-term">query</span></a> into the <a class="reference internal" href="../glossary.html#term-url"><span class="xref std std-term">URL</span></a>. There are plenty ways to query your Data. You can have a look at them <a class="reference external" href="https://docs.influxdata.com/influxdb/v1.7/query_language/data_exploration/">here</a>. In our simple example we query all data of the last minute from our h2o_feet measurement.</div>
</div>
<blockquote>
<div><div class="line-block">
<div class="line"><strong>URL:</strong> <em>http://influxdb:8086/query?db=&lt;Database name&gt;&amp;q=&lt;your query&gt;</em></div>
<div class="line"><strong>Example URL:</strong> <em>http://influxdb:8086/query?db=mydb&amp;q=SELECT * FROM ‚Äúh2o_feet‚Äù WHERE time &gt; now() - 1m</em></div>
</div>
</div></blockquote>
<p>Thats it! Now you receive the Data in your payload. It`s time to process the Data in this or another Streamsheet!</p>
</div>
<div class="section" id="timescaledb">
<span id="timescalefunctions"></span><h2>TimescaleDB<a class="headerlink" href="#timescaledb" title="Permalink to this headline">¬∂</a></h2>
<p><img alt="star" src="../_../_images/star.svg" />  This is a <a class="reference external" href="https://cedalo.com/download/">Streamsheets Professional</a> feature.</p>
<p>The TimescaleDB is a timeseries database based on PostgreSQL. To learn more check their <a class="reference external" href="https://docs.timescale.com/latest/main">website</a> .</p>
<p>As of right now, the usage of the timescaledb is limited to the internal timescaledb of Streamsheets. We are working on allowing the creation of custom Streams.
Until then the creation of timescaledb Streams is dispensable. When using timescaledb functions simply leave the Stream parameter empty and Streamsheets takes care of the rest.</p>
<p><strong>TIMESCALE.INSERT():</strong></p>
<p><em>=TIMESCALE.INSERT(Stream, TableName, ValuesJSON, [Target, TableSchemaJSON])</em></p>
<p><a class="reference internal" href="../_../_images/TI.png"><img alt="TI" src="../_../_images/TI.png" style="width: 331.0px; height: 156.5px;" /></a></p>
<p>To store information in the timescaledb add a TIMESCALE.INSERT function.</p>
<p><em>Stream:</em> Leave empty for now.</p>
<p><em>TableName:</em> Define the name of the table to store the data in.</p>
<p><em>ValuesJSON:</em> A JSON Range over all key value pairs to be stored.</p>
<p><em>Target:</em> Optinal. To get feedback about the request status, define a target range or use INBOX().</p>
<p><em>TableSchemaJSON:</em> Optional. A JSON Range to setup a schema for the used table. If you have not already used setup your table via TIMESCALE.CREATE_TABLE() add the schema in this parameter to automatically create a table.</p>
<p><strong>TIMESCALE.SELECT():</strong></p>
<p><em>=TIMESCALE.SELECT(Stream, SelectJSON [, Target, XValue,])</em></p>
<div class="line-block">
<div class="line"><a class="reference internal" href="../_../_images/TSA.png"><img alt="TSA" src="../_../_images/TSA.png" style="width: 449.5px; height: 221.5px;" /></a></div>
<div class="line"><em>Select all from table ‚ÄúTimescaleDbTable‚Äù, but limit response to 10.</em></div>
</div>
<div class="line-block">
<div class="line"><a class="reference internal" href="../_../_images/TSAVG.png"><img alt="TSAVG" src="../_../_images/TSAVG.png" style="width: 665.5px; height: 116.0px;" /></a></div>
<div class="line"><em>Select the maximum time value and the average of the parameter ‚ÄúCats‚Äù from the table ‚ÄúTimescaleDbTable‚Äù.</em></div>
</div>
<p>To access stored information use the TIMESCALE.SELECT function.</p>
<p><em>Stream:</em> Leave empty for now.</p>
<p><em>SelectJSON:</em> JSON Range with a specified select statement. For every statement use another key value pair in the sheet. E.g. Select: x; from: y; where: z; group by: a; order by: b; limit: c</p>
<p><em>Target:</em> Optional. It is not necessary to select a target, if left empty the data is hold with the cell. This is convinient, if you are interested in displaying the data in a chart and don¬¥t want to waste space on the Streamsheet. You can reference the select query as the chart source.</p>
<p><em>XValue:</em> Optional. If you would like to use the data in a chart, set a key parameter as XValue to define the X axis.</p>
</div>
<div class="section" id="mail-send">
<h2>MAIL.SEND<a class="headerlink" href="#mail-send" title="Permalink to this headline">¬∂</a></h2>
<p>In This Tutorial we will send E-Mails to a Mail Account from our <a class="reference internal" href="../glossary.html#term-streamsheet"><span class="xref std std-term">Streamsheet</span></a>, using an SMTP Client.</p>
<p>First of all, create an SMTP_Connector. Therefore click on the <a class="reference internal" href="../maincomponents/administration.html#administration"><span class="std std-ref">Administration</span></a> Menu and navigate to <a class="reference internal" href="../glossary.html#term-connector"><span class="xref std std-term">Connectors</span></a> to create a new Connector, with a ‚ÄúSMTP Provider‚Äù. To be able to use the SMTP_Connector, the Host-address, the Port and the Security Protocoll of the Mail Service that is used, needs to be typed in. For example the host-address for Gmail is ‚Äúsmtp.gmail.com‚Äù, the Port is 465 and the Security is SSL/TLS. (This may differ from other Mail-Services, their access data can be find on the internet)</p>
<p>For the next Step change to <a class="reference internal" href="../glossary.html#term-producer"><span class="xref std std-term">Producers</span></a> and create a new Producer, using the previously created Connector. Now enter the sender mail address as User name and add the password below.</p>
<p>Even if the whole Setup is correct, there is a high chance that it will fail! For instance Gmail is blocking the access of this app, because it‚Äôs using a ‚Äúlow‚Äù security level. To give Streamsheets access to Gmail, enable ‚Äúallow low security applications‚Äù manually on the Gmail website. After that the Connector and the Producer should be connected!</p>
<p>Now we are ready to switch to a Streamsheet. To insert the ‚Äú<a class="reference internal" href="../functions/streams/mailsend.html#mailsend"><span class="std std-ref">MAIL.SEND</span></a>‚Äù function in the Streamsheet, use the Function Wizard and select ‚ÄúMAIL.SEND‚Äù as the function and the previously created Producer as Stream. For ‚ÄúText, Subject, TO‚Äù etc. either type it in directly or refer to a cell on the sheet. That`s it!</p>
<p>To prevent spam we recommend adding a condition to the MAIL.SEND function üòÑ</p>
<div class="line-block">
<div class="line"><a class="reference internal" href="../_../_images/Loom-speedup.gif"><img alt="SMTP2" src="../_../_images/Loom-speedup.gif" style="width: 832.0px; height: 468.0px;" /></a></div>
<div class="line"><em>Sending mail`s with a condition</em></div>
<div class="line"><em>Note: In version 1.5 the icon for the stream functions was changed</em> <a class="reference internal" href="../_../_images/Streamfunction.png"><img alt="StreamF" src="../_../_images/Streamfunction.png" style="width: 22.5px; height: 21.75px;" /></a></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="addons.html" class="btn btn-neutral float-right" title="Add-Ons" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="uielements.html" class="btn btn-neutral" title="Tools &amp; Charts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Cedalo AG, Streamsheet‚Ñ¢ is a trademark of the Cedalo AG.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

	
		<script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
			<script type="text/javascript" src="../_static/jquery.js"></script>
			<script type="text/javascript" src="../_static/underscore.js"></script>
			<script type="text/javascript" src="../_static/doctools.js"></script>
			<script type="text/javascript" src="../_static/language_data.js"></script>
			<script type="text/javascript" src="../_static/contentui.js"></script>
		

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>